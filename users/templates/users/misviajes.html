{% extends 'Combi19App/base.html' %}

{% load static %}
{% block content %}

<div class="container rounded bg-white mt-5 mb-5">
    <div class="row">
        <div class="col-md-3 col-sm-12 border-right">
            <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                <div class="card partner-wap  py-5 px-5">
                    <i class='display-1 text-white bx bx-user'></i> 
                </div>
                <span class="font-weight-bold pt-5">{{request.user.first_name}}</span>
                <span class="text-black-50">{{request.user.email}}</span>
                
                <span> </span>
            </div>
        </div>

        <div class="col-md-9  col-sm-12 border-right">
            <div class= "row">
                <div class="p-3 py-5">
                    <div class="row justify-content-between">
                        <h4 class="h3 text-right pb-4 col-md-4">Mis Viajes</h4> 
                    </div>
                    <h4 class="h4 text-right pb-4 col-md-4">Pendientes</h4> 
                        {% if pendientes %}
                            {% for v in pendientes %}
                            <div class="row ">
                                <div class="col-xl-12 col-md-12 col-sm-12">
                                    <div  class="card bg-light border-0 shadow-lg overflow-hidden">
                                        <div class="card-body ">
                                            <div class="row">
                                                <div class="col-3">
                                                    <div href="#" class="card border-0 text-white shadow-sm overflow-hidden mx-2 m-sm-0">
                                                        <img class="card-img" src="{{v.ruta.destino.imagen.url}}" alt="">
                                                    </div>
                                                </div>
                                                <div class=" col-6 px-3">
                                                    <h5 class="h5 ">{{v.ruta.destino}}, <span class="text-muted">{{v.ruta.destino.provincia}}</span></h2>
                                                    <p class="m-0 p-0 text-muted">Desde {{v.ruta.origen}} <i class='p-0 bx bx-map'></i></p> 
                                                    <br>
                                                    <p class="m-0 p-0 text-muted">{{v.fecha|date:"d/m/Y"  }} </p> 
                                                    <p class="m-0 p-0 text-muted">{{v.fecha | time}} </p> 
                                                </div>
                                                <div class="col-3 ">
                                                    {% if request.user.es_chofer %}
                                                    <a href="{% url 'Pasajeros' v_id=v.id %}" class="btn btn-primary my-1">Ver Pasajeros</a>
                                                    <a href="{% url 'Finalizar Viaje' v_id=v.id %}" class="btn btn-warning my-1">Finalizar Viaje</a>
                                                    <a href="{% url 'Cancelar Viaje' v_id=v.id %}" class="btn btn-danger my-1">Cancelar viaje</a>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div><!-- End Recent Work -->  
                            </div>    
                        {% endfor %}
                        {% else %}
                            <h5 class="h5 text-muted mx-4 col-12">Actualmente no tenés viajes pendientes</h5> 
                        {% endif %}
                        
                    </div>
                    <h4 class="h4 text-right pb-4 col-md-4">Finalizados</h4> 
                        {% if finalizados %}
                            {% for v in finalizados %}
                            <div class="row ">
                                <div class="col-xl-12 col-md-12 col-sm-12">
                                    <div  class="card bg-light border-0 shadow-lg overflow-hidden">
                                        <div class="card-body ">
                                            <div class="row">
                                                <div class="col-3">
                                                    <div href="#" class="card border-0 text-white shadow-sm overflow-hidden mx-2 m-sm-0">
                                                        <img class="card-img" src="{{v.ruta.destino.imagen.url}}" alt="">
                                                    </div>
                                                </div>
                                                <div class=" col-6 px-3">
                                                    <h5 class="h5 ">{{v.ruta.destino}}, <span class="text-muted">{{v.ruta.destino.provincia}}</span></h2>
                                                    <p class="m-0 p-0 text-muted">Desde {{v.ruta.origen}} <i class='p-0 bx bx-map'></i></p> 
                                                    <br>
                                                    <p class="m-0 p-0 text-muted">{{v.fecha|date:"d/m/Y"  }} </p> 
                                                    <p class="m-0 p-0 text-muted">{{v.fecha | time}} </p> 
                                                </div>
                                                <div class="col-3 ">
                                                    {% if request.user.es_chofer %}
                                                    <a href="{% url 'Pasajeros' v_id=v.id %}" class="btn btn-primary my-1">Ver Pasajeros</a>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div><!-- End Recent Work -->  
                            </div>    
                        {% endfor %}
                        {% else %}
                            <h5 class="h5 text-muted mx-4 col-12">Actualmente no tenés viajes finalizados</h5> 
                        {% endif %}
                        
                    </div>
                    <h4 class="h4 text-right pb-4 col-md-4">Cancelados</h4> 
                        {% if cancelados %}
                            {% for v in cancelados %}
                            <div class="row ">
                                <div class="col-xl-12 col-md-12 col-sm-12">
                                    <div  class="card bg-light border-0 shadow-lg overflow-hidden">
                                        <div class="card-body ">
                                            <div class="row">
                                                <div class="col-3">
                                                    <div href="#" class="card border-0 text-white shadow-sm overflow-hidden mx-2 m-sm-0">
                                                        <img class="card-img" src="{{v.ruta.destino.imagen.url}}" alt="">
                                                    </div>
                                                </div>
                                                <div class=" col-6 px-3">
                                                    <h5 class="h5 ">{{v.ruta.destino}}, <span class="text-muted">{{v.ruta.destino.provincia}}</span></h2>
                                                    <p class="m-0 p-0 text-muted">Desde {{v.ruta.origen}} <i class='p-0 bx bx-map'></i></p> 
                                                    <br>
                                                    <p class="m-0 p-0 text-muted">{{v.fecha|date:"d/m/Y"  }} </p> 
                                                    <p class="m-0 p-0 text-muted">{{v.fecha | time}} </p> 
                                                </div>
                                                <div class="col-3 ">
                                                    {% if request.user.es_chofer %}
                                                    <a href="{% url 'Pasajeros' v_id=v.id %}" class="btn btn-primary my-1">Ver Pasajeros</a>
                                                    
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div><!-- End Recent Work -->  
                            </div>    
                        {% endfor %}
                        {% else %}
                            <h5 class="h5 text-muted mx-4 col-12">Actualmente no tenés viajes cancelados</h5> 
                        {% endif %}
                        
                    </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
 <!-- Bootstrap core JS-->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js "></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js "></script>
 <!-- Third party plugin JS-->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js "></script>
 <!-- Bootstrap -->
 <script src="{% static 'Combi19App/js/bootstrap.bundle.min.js' %}"></script>
 <!-- Load jQuery require for isotope -->
 <script src="{% static 'Combi19App/js/jquery.min.js' %}"></script>
{% endblock %} 